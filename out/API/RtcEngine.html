<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2020"><meta name="DC.rights.owner" content="(C) Copyright 2020"><meta name="DC.type" content="topic"><meta name="description" content="RtcEngine 类包含应用程序调用的主要方法。"><meta name="DC.subject" content="setChannelProfile, joinChannel, setClientRole"><meta name="keywords" content="setChannelProfile, joinChannel, setClientRole"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="rtcengine"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>RtcEngine</title></head><body><nav role="toc"><ul><li><span>API Reference</span><ul><li><a href="../API/API-overview.html">Agora Java API Reference for Android</a></li><li class="active"><a href="../API/RtcEngine.html#rtcengine">RtcEngine</a><ul><li><a href="../API/RtcEngine.html#setchannelprofile">setChannelProfile</a></li><li><a href="../API/RtcEngine.html#join">joinChannel</a></li><li><a href="../API/RtcEngine.html#setclientrole">setClientRole</a></li></ul></li><li><a href="../API/RtcEngineEventHandler.html#rtcevent">IRtcEngineEventHandler</a><ul><li><a href="../API/RtcEngineEventHandler.html#onclientrolechanged">onClientRoleChanged</a></li><li><a href="../API/RtcEngineEventHandler.html#onuserjoined">onUserJoined</a></li></ul></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="rtcengine"><h1 class="title topictitle1" id="ariaid-title1"><span class="xref"><span class="keyword">RtcEngine</span></span></h1><div class="body"><p class="shortdesc"><span class="xref"><span class="keyword">RtcEngine</span></span> 类包含应用程序调用的主要方法。</p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="setchannelprofile"><h2 class="title topictitle2" id="ariaid-title2"><a class="xref" href="RtcEngine.html#setchannelprofile"><span class="keyword">setChannelProfile</span></a></h2><div class="body"><div class="p">
            <pre class="pre codeblock java"><code>public abstract int setChannelProfile(int profile);</code></pre>
    </div><p class="p">设置频道场景。</p><p class="p">该方法用户设置 Agora 频道的使用场景。Agora SDK 会针对不同的使用场景采用不同的优化策略，如通信场景偏好流程，直播场景偏好画质。</p><section class="section" id="setchannelprofile__调用时序"><h3 class="title sectiontitle">调用时序</h3><p class="p">该方法需要在加入频道前调用。</p></section><section class="section" id="setchannelprofile__注意事项"><h3 class="title sectiontitle">注意事项</h3><ul class="ul"><li class="li"><p class="p">为保证实时音视频质量，我们建议相同频道内的用户必须使用同一种频道场景。</p></li><li class="li"><p class="p">不同的频道场景下，SDK 的默认音频路由和默认视频编码码率是不同的，详见 <code class="ph codeph">setDefaultAudioRoutetoSpeakerphone</code> 和 <code class="ph codeph">setVideoEncoderConfiguration</code> 中的说明。</p></li></ul></section><section class="section" id="setchannelprofile__参数"><h3 class="title sectiontitle">参数</h3><table class="table"><caption></caption><colgroup><col><col></colgroup><thead class="thead"><tr class="row"><th class="entry" id="setchannelprofile__参数__entry__1">参数</th><th class="entry" id="setchannelprofile__参数__entry__2">描述</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" headers="setchannelprofile__参数__entry__1">profile</td><td class="entry" headers="setchannelprofile__参数__entry__2">频道使用场景：<ul class="ul"><li class="li">0: (默认)通信场景。该场景下，频道内所有用户都可以发布和接收音、视频流。适用于语音通话、视频群聊等应用场景。</li><li class="li">1: 直播场景。该场景有主播和观众两种用户角色，可以通过 <a class="xref" href="RtcEngine.html#setclientrole"><span class="keyword">setClientRole</span></a> 设置。主播可以发布和接收音视频流，观众直接接收流。适用于语聊房、视频直播、互动大班课等应用场景。</li><li class="li">2: 游戏场景。该选项已废弃，Agora 不推荐使用。</li></ul></td></tr></tbody></table></section><section class="section" id="setchannelprofile__返回值"><h3 class="title sectiontitle">返回值</h3><ul class="ul"><li class="li"><p class="p">0: 方法调用成功。</p></li><li class="li"><p class="p">&lt; 0: 方法调用失败。</p><ul class="ul"><li class="li"><p class="p">-2: 参数无效。</p></li><li class="li"><p class="p">-7: SDK 尚未初始化。</p></li></ul></li></ul></section></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="join"><h2 class="title topictitle2" id="ariaid-title3"><a class="xref" href="RtcEngine.html#join"><span class="keyword">joinChannel</span></a></h2><div class="body"><div class="p">
            <pre class="pre codeblock java"><code>public abstract int joinChannel(String token, String channelName, String optionalInfo, int optionalUid);</code></pre>
    </div><p class="p">加入频道。</p><p class="p">该方法让用户加入通话频道，在同一个频道内的用户可以互相通话，多个用户加入同一个频道，可以群聊。使用不同 App ID 的 App 是不能互通的。如果已在通话中，用户必须调用 <span class="xref"></span> 退出当前通话，才能进入下一个频道。</p><p class="p">成功调用该方加入频道后，本地会触发 <span class="xref"><span class="keyword">onJoinChannelSuccess</span></span> 回调；通信场景下的用户和直播场景下的主播加入频道后，远端会触发 <a class="xref" href="RtcEngineEventHandler.html#onuserjoined" title="远端用户（通信场景）/主播（直播场景）加入当前频道回调。"><span class="keyword">onUserJoined</span></a> 回调。</p><p class="p">在网络状况不理想的情况下，客户端可能会与 Agora 的服务器失去连接；SDK 会自动尝试重连，重连成功后，本地会触发 <span class="xref"><span class="keyword">onRejoinChannelSuccess</span></span> 回调。</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="setclientrole"><h2 class="title topictitle2" id="ariaid-title4"><a class="xref" href="RtcEngine.html#setclientrole"><span class="keyword">setClientRole</span></a></h2><div class="body"><div class="p">
            <pre class="pre codeblock java"><code>public abstract int setClientRole(int role);</code></pre>        
            
    </div><p class="p">设置直播场景下的用户角色。</p><section class="section" id="setclientrole__调用顺序"><h3 class="title sectiontitle">调用顺序</h3><ul class="ul"><li class="li"><p class="p">在加入频道前，用户需要通过本方法设置观众（默认）或主播模式。</p></li><li class="li"><p class="p">在加入频道后，用户可以通过本方法切换用户模式。</p></li></ul></section><section class="section" id="setclientrole__关联回调"><h3 class="title sectiontitle">关联回调</h3><p class="p">如果你在加入频道后调用该方法切换用户角色，调用成功后，本地会触发 <span class="xref"><span class="keyword">onClientRoleChanged</span></span> 回调；远端会触发 <a class="xref" href="RtcEngineEventHandler.html#onuserjoined" title="远端用户（通信场景）/主播（直播场景）加入当前频道回调。"><span class="keyword">onUserJoined</span></a>/<span class="xref"><span class="keyword">onUserOffline</span></span>(USER_OFFLINE_BECOME_AUDIENCE) 回调。</p></section><section class="section" id="setclientrole__注意事项"><h3 class="title sectiontitle">注意事项</h3><p class="p">该方法仅在直播场景下生效。</p></section><section class="section" id="setclientrole__参数"><h3 class="title sectiontitle">参数</h3></section><section class="section" id="setclientrole__返回值"><h3 class="title sectiontitle">返回值</h3></section></div></article></article></article></main></body></html>