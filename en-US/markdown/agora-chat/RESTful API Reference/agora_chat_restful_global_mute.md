With inscreasingly strict rules and regulatins on app compliance, content supervision is now playing a crucial part in the lifecycle of most apps. To meet this need, Agora Chat provides the global-mute feature, which enables you to mute any user ID in one-to-one chats, group chats, or chat rooms, preventing these users from sending any one-to-one, chat group, or chat room messages. When global-mute expires, the chat server automatically unmutes the user ID and this user resumes the privilege of sending messages.

This feature can be widely applied in apps that power real-time engagements. For example, if a user frequently sends illegit advertisements to multiple chat rooms, you can use global-mute to prevent this user from sending chat room messages for 15 days; if a user makes improper statements concerning politics, you can use global-mute to permanently prevent this user from sending any messages in one-to-one chats, chat groups, and chat rooms.

<a name="param"></a>

## Common parameters

The following table lists common request and response parameters of the Agora Chat RESTful APIs:

### Request parameters

| Parameter | Type | Description | Required |
| :--------- | :----- | :----- | :----- |
| `host` | String | The domain name assigned by the Agora Chat service to access RESTful APIs. For how to get the domain name, see [Get the information of your project](./enable_agora_chat?platform=RESTful#get-the-information-of-the-agora-chat-project). | Yes |
| `org_name` | String | The unique identifier assigned to each company (organization) by the Agora Chat service. For how to get the org name, see [Get the information of the Agora Chat project](./enable_agora_chat?platform=RESTful#get-the-information-of-the-agora-chat-project). | Yes |
| `app_name` | String | The unique identifier assigned to each app by the Agora Chat service. For how to get the app name, see [Get the information of the Agora Chat project](./enable_agora_chat?platform=RESTful#get-the-information-of-the-agora-chat-project). | Yes |
| `username` | String | The unique login account of the user. The username must be 64 characters or less and cannot be empty. The following character sets are supported:<ul><li>26 lowercase English letters (a-z)</li><li>26 uppercase English letters (A-Z)</li><li>10 numbers (0-9)</li><li>"\_", "-", "."</li></ul><div class="alert note"><ul><li>The username is case insensitive, so `Aa` and `aa` are the same username.<li><li>Ensure that each username under the same app is unique.</li></ul></div> | Yes |

### Response parameters

| Parameter | Type | Description |
| :------------------- | :----- |  :----- |
| `action` | String | The request method. |
| `organization` | String | The unique identifier assigned to each company (organization) by the Agora Chat service. This is the same as `org_name`. |
| `application` | String | A unique internal ID assigned to each app by the Agora Chat service. You can safely ignore this parameter. |
| `applicationName` | String | The unique identifier assigned to each app by the Agora Chat service . This is the same as `app_name`. |
| `uri` | String | The request URI. |
| `path` | String | The request path, which is part of the request URL. You can safely ignore this parameter. |
| `entities ` | JSON | The response entity. |
| `entities.uuid` | String | The user's UUID. A unique internal identifier generated by the Agora Chat service for the user in this request. This is used for generating the user token. |
| `entities.type` | String | The type of the object. You can safely ignore this parameter. |
| `entities.created` | Number | The Unix timestamp (ms) when the user is registered. |
| `entities.modified` | Number | The Unix timestamp (ms) when the user information is last modified. |
| `entities.username` | String | The username. The unique account the user is logged in with. |
| `entities.activated` | Bool | Whether the user is active:<ul><li>`true`: The user is active.</li><li>`false`: The user is in banned. To use a banned user account, you need to call the [unban-user](./agora_chat_restful_registration?platform=RESTful#unban) method to unban the account.</li></ul> |
| `timestamp` | Number | The Unix timestamp (ms) of the HTTP response. |
| `duration` | Number | The duration (ms) from when the HTTP request is sent to the time the response is received. |

## Authorization

Agora Chat RESTful APIs require Bearer HTTP authentication. Every time an HTTP request is sent, the following Authorization field must be filled in the request header:

```http
Authorization: Bearer ${YourAppToken}
```

In order to improve the security of the project, Agora uses a token (dynamic key) to authenticate users before they log in to the chat system. Agora Chat RESTful APIs only support authenticating users using app tokens. For details, see [Authentication using App Token](./generate_app_tokens?platform=RESTful).


## Globally mute a specified user

This method mutes a specified user in one-to-one chats, chat groups, or chat rooms. After a successful method call, this user can no longer send messges in one-to-one chats, chat groups, or chat rooms, depending on your settings in the request parameter.

### HTTP request

```http
POST https://{host}/{orgName}/{appName}/mutes
```

#### Path parameter

For parameters and the detailed descriptions, see [Commom parameters](#param).

#### Request parameter

| Parameter | Type | Required | Description |
| --- | --- | --- | --- |
| `username` | String | Yes | The user ID that you want to globally mute. |
| `chat` | Number | No | The time duration for muting this user ID in one-to-one chats, in seconds. The maximum value is 2,147,483,647.<ul><li>&gt; 0: The time duration for muting the user in one-to-one chats.</li><li>0: Unmutes the user in one-to-one chats.</li><li>-1: Permanently mutes the user in one-to-one chats.</li><li>If you set this parameter as any other negative values, the setting does not take effect.</li> |
| `groupchat` | Number | No | The time duration for muting this user in group chats, in seconds. The value setting rules are the same as those of `chat`. |
| `chatroom` | Number | No | The time duration for muting this user in chat rooms, in seconds. The value setting rules are the same as those of `chat`. |

#### Request header

| Parameter | Type | Description |
| --- | --- | --- |
| `Content-Type` | String | The content type. Set is as `application/json`. |
| `Authorization` | String | The authentication token of the user or admin, in the format of `Bearer ${token}`, where `Bearer` is a fixed character, followed by an English space, and then the obtained token value. |

### HTTP response

If the returned HTTP status code is `200`, the request succeeds, and the response body contains the following fields:

| Parameter | Type | Description |
| --- | --- | --- |
| `result` | String | The result of this method call. `ok` means that glocal-mute is successfully enabled. |

For other fields and detailed descriptions, see [Common parameters](#param).

If the returned HTTP status code is not `200`, the request fails. You can refer to [Status codes](./agora_chat_status_code?platform=RESTful) for possible reasons.

### Example

#### Request example

```shell
curl -L -X POST 'https://XXXX/XXXX/XXXX/mutes' \
-H 'Authorization: Bearer {{token}}' \
-H 'Content-Type: application/json' \
--data-raw '{
    "username": "XXXX",
    "chat": 100,
    "groupchat": 100,
    "chatroom": 100
}'
```

#### Reponse example

```json
{
    "path": "/mutes",
    "uri": "https://XXXX/XXXX/XXXX/mutes",
    "timestamp": 1631609754727,
    "organization": "XXXX",
    "application": "XXXX",
    "action": "post",
    "data": {
        "result": "ok"
    },
    "duration": 74,
    "applicationName": "XXXX"
}
```

## Retrieve the global-mute settings of the specified user ID

This method queries the detailed information of the global-mute settings of the specified user in one-to-one chats, group chats, or chatrooms.

### HTTP request

```http
GET https://{host}/{orgName}/{appName}/mutes/username
```

#### Path parameter

| Parameter | Type | Required | Description |
| --- | --- | --- | --- |
| `username` | String | Yes | The user ID whose global-mute settings you want to query. |

For other parameters and the detailed descriptions, see [Commom parameters](#param).

#### Request header

| Parameter | Type | Description |
| --- | --- | --- |
| `Content-Type` | String | The content type. Set is as `application/json`. |
| `Authorization` | String | The authentication token of the user or admin, in the format of `Bearer ${token}`, where `Bearer` is a fixed character, followed by an English space, and then the obtained token value. |

### HTTP response

If the returned HTTP status code is `200`, the request succeeds, and the response body contains the following fields:

| Parameter | Type | Description |
| --- | --- | --- |
| `userid` | String | The user ID whose global-mute settings you want to query. |
| `chat` | Number | The remaining time duration when this user is muted in one-to-one chats, in seconds. The maximum value is 2,147,483,647.<ul><li>&gt; 0: The remaining duration for muting this user in one-to-one chats.</li><li>0: This user is unmuted in one-to-one chats.</li><li>-1: This user is permanently muted in one-to-one chats.</li></ul> |
| `groupchat` | Number | The remaining time duration when this user is muted in group chats, in seconds. The rules of the returned data are the same with those of `chat`. |
| `chatroom` | Number | The remaining time duration when this user is muted in group rooms, in seconds. The rules of the returned data are the same with those of `chat`. |
| `unixtime` | Number | The Unix timestamp of the current operation. |

For other fields and detailed descriptions, see [Common parameters](#param).

If the returned HTTP status code is not `200`, the request fails. You can refer to [Status codes](./agora_chat_status_code?platform=RESTful) for possible reasons.

### Example

#### Request example

```shell
curl -L -X GET 'https://XXXX/XXXX/XXXX/mutes/{username}' \
-H 'Authorization: Bearer {{token}}' \
-H 'Content-Type: application/json'
```

#### Response example

```json
{
    "path": "/mutes",
    "uri": "https://XXXX/XXXX/XXXX/mutes",
    "timestamp": 1631609831800,
    "organization": "XXXX",
    "application": "XXXX",
    "action": "get",
    "data": {
        "userid": "XXXX",
        "chat": 96,
        "groupchat": 96,
        "chatroom": 96,
        "unixtime": 1631609831
    },
    "duration": 13,
    "applicationName": "XXXX"
}
```

## Retrieve all globally muted users in the app

This method retrieves all the users that have been globally muted in the app, together with the remaining time duration when each user is muted.

### HTTP request

```http
GET https://{host}/{orgName}/{appName}/mutes
```

#### Path parameter

For parameters and the detailed descriptions, see [Commom parameters](#param).

#### Request header

| Parameter | Type | Description |
| --- | --- | --- |
| `Content-Type` | String | The content type. Set is as `application/json`. |
| `Authorization` | String | The authentication token of the user or admin, in the format of `Bearer ${token}`, where `Bearer` is a fixed character, followed by an English space, and then the obtained token value. |

#### Request body

| Parameter | Type | Required | Description |
| --- | --- | --- | --- |
| `pageNum` | Number | Yes | The number of pages for querying the globally muted users in the app. |
| `pageSize` | Number | Yes | The number of data entries on each page. |

### HTTP response

If the returned HTTP status code is `200`, the request succeeds, and the response body contains the following fields:

| Parameter | Type | Description |
| --- | --- | --- |
| `username` | String | The user ID whose global-mute settings you want to query. |
| `chat` | Number | The remaining time duration when this user is muted in one-to-one chats, in seconds. The maximum value is 2,147,483,647.<ul><li>&gt; 0: The remaining duration for muting this user in one-to-one chats.</li><li>0: This user is unmuted in one-to-one chats.</li><li>-1: This user is permanently muted in one-to-one chats.</li></ul> |
| `groupchat` | Number | The remaining time duration when this user is muted in group chats, in seconds. The rules of the returned data are the same with those of `chat`. |
| `chatroom` | Number | The remaining time duration when this user is muted in group rooms, in seconds. The rules of the returned data are the same with those of `chat`. |
| `unixtime` | Number | The Unix timestamp of the current operation. |

For other fields and detailed descriptions, see [Common parameters](#param).

If the returned HTTP status code is not `200`, the request fails. You can refer to [Status codes](./agora_chat_status_code?platform=RESTful) for possible reasons.

### Example

#### Request example

```shell
curl -L -X GET 'https://XXXX/XXXX/XXXX/mutes?pageNum=1&pageSize=10' \
-H 'Authorization: Bearer {{token}}' \
-H 'Content-Type: application/json'
```

#### Response example

```json
{
    "path": "/mutes",
    "uri": "https://XXXX/XXXX/XXXX/mutes",
    "timestamp": 1631609858771,
    "organization": "XXXX",
    "application": "XXXX",
    "action": "get",
    "data": {
        "data": [
            {
                "username": "XXXX",
                "chatroom": 0
            },
            {
                "username": "XXXX",
                "groupchat": 69
            },
            {
                "username": "XXXX",
                "chat": 69
            },
            {
                "username": "XXXX",
                "chatroom": 69
            },
            {
                "username": "XXXX",
                "chatroom": 0
            },
            {
                "username": "XXXX",
                "groupchat": 0
            },
            {
                "username": "XXXX",
                "chat": 0
            }
        ],
        "unixtime": 1631609858
    },
    "duration": 17,
    "applicationName": "XXXX"
}
```







