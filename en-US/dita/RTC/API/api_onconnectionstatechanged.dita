<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_onconnectionstatechanged">
    <title><ph keyref="onConnectionStateChanged"/></title>
    <shortdesc id="short"><ph id="shortdesc">Occurs when the network connection state changes.</ph></shortdesc>
    <prolog>
        <metadata>
   <keywords>
       <indexterm keyref="onConnectionStateChanged" />
   </keywords>
        </metadata>
    </prolog>
    <refbody><section id="prototype">
        <p outputclass="codeblock">
                <codeblock props="android" outputclass="language-java">public void onAudioMixingStateChanged(int state,int reason){ }</codeblock>
                <codeblock props="ios mac" outputclass="language-objectivec">- (void)rtcEngine:(AgoraRtcEngineKit * _Nonnull)engine connectionStateChanged:(AgoraConnectionState)state reason:(AgoraConnectionChangedReason)reason;</codeblock>
                <codeblock props="windows" outputclass="language-cpp">virtual void onConnectionStateChanged(CONNECTION_STATE_TYPE state, CONNECTION_CHANGED_REASON_TYPE reason) { (void)state; (void)reason; }</codeblock>
                <codeblock props="electron" outputclass="language-typescript">on(evt: EngineEvents.CONNECTION_STATE_CHANGED, cb: ( state: CONNECTION_STATE_TYPE, reason: CONNECTION_CHANGED_REASON_TYPE ) => void): this;</codeblock>
                <codeblock props="unity" outputclass="language-csharp"/>
                <codeblock props="rn" outputclass="language-typescript"/>
                <codeblock props="flutter" outputclass="language-dart"/>
        </p>
        </section>
        <section id="detailed_desc">
   
   <dl outputclass="since">
       <dlentry>
  <dt>Since</dt>
  <dd>v2.3.2</dd>
       </dlentry>
   </dl>
   <p id="desc">When the network connection state changes, the SDK triggers this callback and reports the current connection state and the reason for the change.</p>
        </section>
        <section id="parameters"><title>Parameter</title>
   <parml>
       <plentry conkeyref="onJoinChannelSuccess/engine" props="ios mac">
                  <pt/>
                  <pd/>
              </plentry>
       <plentry id="state">
  <pt>state</pt>
  <pd><p props="ios mac windows">The current connection state. 详见 <xref keyref="CONNECTION_STATE_TYPE"/>。</p>
      <p props="android">The current connection state.<ul><li><ph keyref="CONNECTION_STATE_DISCONNECTED"/> 1: The SDK is disconnected from Agora&apos;s edge server.</li><li><ph keyref="CONNECTION_STATE_CONNECTING"/> 2: The SDK is connecting to Agora&apos;s edge server.</li><li><ph keyref="CONNECTION_STATE_CONNECTED"/> 3: The SDK is connected to Agora&apos;s edge server and has joined a channel.</li><li><ph keyref="CONNECTION_STATE_RECONNECTING"/> 4:</li><li><ph keyref="CONNECTION_STATE_FAILED"/> 5: The SDK fails to connect to Agora&apos;s edge server or join the channel.</li></ul>
                        </p>
  </pd>
       </plentry>
       <plentry id="reason">
  <pt>reason</pt>
           <pd><p props="ios mac windows">The reason for a connection state change. 详见 <xref keyref="CONNECTION_CHANGED_REASON_TYPE"/>。</p>
           <p props="android">
               <ul>
                   <li><ph keyref="CONNECTION_CHANGED_CONNECTING"/> 0: The SDK is connecting to Agora&apos;s edge server.</li>
                   <li><ph keyref="CONNECTION_CHANGED_JOIN_SUCCESS"/> 1: The SDK has joined the channel successfully.</li>
                   <li><ph keyref="CONNECTION_CHANGED_INTERRUPTED"/> 2: The connection between the SDK and Agora&apos;s edge server is interrupted.</li>
                   <li><ph keyref="CONNECTION_CHANGED_BANNED_BY_SERVER"/> 3: The connection between the SDK and Agora&apos;s edge server is banned by Agora&apos;s edge server.</li>
                   <li><ph keyref="CONNECTION_CHANGED_JOIN_FAILED"/> (4)：加入频道失败 。</li>
                   <li><ph keyref="CONNECTION_CHANGED_LEAVE_CHANNEL"/> (5)：离开频道 。</li>
                   <li><ph keyref="CONNECTION_CHANGED_INVALID_APP_ID"/> 6: The connection failed since Appid is not valid. Please rejoin the channel with a valid App ID.</li>
                   <li><ph keyref="CONNECTION_CHANGED_INVALID_CHANNEL_NAME"/> 7: The connection failed since channel name is not valid. Please rejoin the channel with a valid channel name.</li>
                   <li><ph keyref="CONNECTION_CHANGED_INVALID_TOKEN"/> 8: The connection failed because the token is not valid. Typical reasons include:<ul
                                        id="ul_pf4_kcx_qqb">
                       <li>The App Certificate for the project is enabled in Agora Console, but you do not use a token when joining the channel. If you enable the App Certificate, you must use a token to join the channel.</li>
                       <li>The<xref keyref="joinChannel1"/> uid specified when calling to join the channel is inconsistent with the uid passed in when generating the token.</li>
                                    </ul>
                                </li>
                   <li><ph keyref="CONNECTION_CHANGED_TOKEN_EXPIRED"/> 9: The connection failed since token is expired.</li>
                   <li><ph keyref="CONNECTION_CHANGED_REJECTED_BY_SERVER"/> 10: The connection is rejected by server.</li>
                   <li><ph keyref="CONNECTION_CHANGED_SETTING_PROXY_SERVER"/> 11: The connection changed to reconnecting since SDK has set a proxy server.</li>
                   <li><ph keyref="CONNECTION_CHANGED_RENEW_TOKEN"/> 12: When SDK is in connection failed, the renew token operation will make it connecting.</li>
                   <li><ph keyref="CONNECTION_CHANGED_CLIENT_IP_ADDRESS_CHANGED"/> 13: The IP Address of SDK client has changed. i.e., Network type or IP/Port changed by network operator might change client IP address.</li>
                   <li><ph keyref="CONNECTION_CHANGED_KEEP_ALIVE_TIMEOUT"/> 14: Timeout for the keep-alive of the connection between the SDK and the Agora edge server. The connection state changes to state .</li>
                   <li><ph keyref="CONNECTION_CHANGED_REJOIN_SUCCESS"/> (15)：重新加入频道成功 。</li>
                   <li><ph keyref="CONNECTION_CHANGED_LOST"/> (16)：SDK 和服务器失去连接 。</li>
                   <li><ph keyref="CONNECTION_CHANGED_ECHO_TEST"/> (17)：连接状态变化由回声测试引起。</li>
               </ul>
           </p>
           </pd>
       </plentry>
   </parml>
        </section>
</refbody>
</reference>
