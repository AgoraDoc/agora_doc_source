<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="release_ng">
    <title/>
    <topic id="level2">
        <title>v4.2.2</title>
        <body><p>该版本于 2023 年 7 月 xx 日发布。</p></body>
        <topic id="level3">
            <title/>
            <topic id="compatibility">
                <title>升级必看</title>
                <body>
                    <ol>
                        <li>第一个升级必看
                            <ul>
                            <li>xxx</li>
                            <li>xxx</li>
                            </ul></li>
                        <li>第二个升级必看 
                            <p>xxx</p>
                        </li>
                    </ol>
                </body>
            </topic>
            <topic id="newfeature">
                <title>新增特性</title>
                <body>
                    <ol>
                        <li><b>自定义视频画布背景颜色</b>
                            <p>该版本在 <codeph><apiname keyref="VideoCanvas"/></codeph> 中增加了 <codeph>backgroundColor</codeph> 成员，支持你在设置本地或远端视频显示属性时，自定义视频画布的背景颜色。</p>
                        </li>
                        <li props="apple"><b>指定视频源进行预览</b>
                            <p>为支持用户选择不同类型的视频源进行本地视频预览，该版本新增 <codeph><apiname keyref="startPreview2"/></codeph> 和 <codeph><apiname keyref="stopPreview2"/></codeph>方法。你可以调用 <codeph><apiname keyref="startPreview2"/></codeph> 并设置 <codeph>sourceType</codeph> 指定待预览的视频源类型；然后掉用 <codeph><apiname keyref="stopPreview2"/></codeph> 关闭视频预览。 </p>
                        </li>
                        <li><b/>
                            <p/>
                        </li>
                    </ol>
                </body>
            </topic>
            <topic id="improvement">
                <title>改进</title>
                <body>
                    <ol>
                        <li props="android ios cpp unreal bp flutter unity rn"><b><ph>摄像头采集效果提升 </ph><ph props="cpp unreal bp flutter unity">(Android &amp; iOS)</ph></b>
                            <p props="ios cpp unreal bp flutter unity rn">该版本从以下几个方面提升了摄像头采集效果：<ol>
                                <li><ph>支持摄像头采集曝光调节</ph>
                                    <p>新增 <codeph><apiname keyref="isCameraExposureSupported"/></codeph> 和 <codeph><apiname keyref="setCameraExposureFactor"/></codeph> 方法，用于查询当前设备是否支持曝光调节和设置摄像头的曝光增益。</p></li>
                                <li><ph>优化默认摄像头选择 </ph><ph props="cpp unreal bp flutter unity rn">(iOS)</ph>
                                    <p>自该版本起，SDK 的默认摄像头选择对齐 iOS 系统相机行为。如果设备拥有多个后置摄像头，则在视频采集时可以获得更好的拍摄视野、变焦能力、低光性能和深度感应，从而提高视频采集的质量。</p></li>
                            </ol></p>
                            <p props="android">该版本支持摄像头采集曝光调节。新增 <codeph><apiname keyref="isCameraExposureSupported"/></codeph> 和 <codeph><apiname keyref="setCameraExposureFactor"/></codeph> 方法，用于查询当前设备是否支持曝光调节和设置摄像头的曝光增益。</p>
                        </li>
                        <li><b>视频编解码查询能力增强</b>
                            <p>为提升设备编解码能力查询功能，该版本在 <codeph><apiname keyref="CodecCapInfo"/></codeph> 中新增 <codeph>codecLevels</codeph> 成员。当成功调用 <codeph><apiname keyref="queryCodecCapability"/></codeph> 后，可通过 <codeph>codecLevels</codeph> 得知当前设备对于 H.264 和 H.265 格式的视频的硬件和软件解码能力等级。</p>
                        </li>
                        <li><b>虚拟背景算法升级</b>
                            <p>该版本升级了虚拟背景的人像分割算法，全面提升了人像分割的准确度、人像边缘与虚拟背景间的平滑度以及人物移动时边缘的贴合度，同时优化了虚拟背景在会议、办公、居家等场景下，以及逆光、弱光等条件下的人物边缘精度。</p>
                        </li>
                        <li><b>跨频道连麦优化</b>
                            <p>该版本将跨频道连麦时媒体流转发的目标频道增加至 6 个，在调用 <codeph><apiname keyref="startOrUpdateChannelMediaRelay"/></codeph> 和 <codeph><apiname keyref="startOrUpdateChannelMediaRelayEx"/></codeph> 时，你可以指定最多 6 个目标频道。</p>
                        </li>
                    </ol>
                    <p>该版本还进行了如下改进：
                        <ol>
                        <li>为帮助用户了解更多类型的远端视频状态改变的原因，<codeph><apiname keyref="onRemoteVideoStateChanged"/></codeph> 回调中新增了 <codeph><ph keyref="REMOTE_VIDEO_STATE_REASON_CODEC_NOT_SUPPORT"/></codeph> 枚举，表示本地的视频解码器不支持对收到的远端视频流进行解码。</li>
                        <li>在屏幕共享场景下，SDK 根据共享的场景自动调节发送端的帧率。尤其是在共享文档场景下，避免发送端的视频码率超出预期的情况，以提高传输效率、减小网络负担。</li>
                        <li>为了提升多种音频路由之间的切换体验，该版本新增了 <codeph><apiname keyref="setRouteInCommunicationMode"/></codeph> 方法，用于在通话音量模式（MODE_IN_COMMUNICATION）下，将音频路由从蓝牙耳机切换为听筒、有线耳机或扬声器。</li>
                        </ol></p>
                </body>
            </topic>
            <topic id="bugfix">
                <title>问题修复</title>
                <body>
                    <ul>
                        <li>在屏幕共享场景下，部分机型偶现屏幕共享画面出图延迟高于预期。</li> 
                        <li>自采集场景下，<codeph><apiname keyref="setBeautyEffectOptions"/></codeph>、<codeph><apiname keyref="setLowlightEnhanceOptions"/></codeph>、<codeph><apiname keyref="setVideoDenoiserOptions"/></codeph> 和 <codeph><apiname keyref="setColorEnhanceOptions"/></codeph> 无法自动加载插件。</li>
                        <li props="cpp mac unity electron unreal bp flutter">多设备音频录制场景下，反复插拔或开启/禁用音频录制设备后，偶现调用 <codeph><apiname keyref="startRecordingDeviceTest"/></codeph> 进行音频采集设备测试时听不到声音。</li>
                    </ul>
                </body>
            </topic>
            <topic id="apichange">
                <title>API 变更</title>
                <body>
                    <p><b>新增</b>
                        <ul>
                        <li><apiname keyref="startPreview2" props="apple"/></li>
                        <li><apiname keyref="stopPreview2" props="apple"/></li>
                        <li><apiname keyref="setCameraExposureFactor" props="android ios cpp unreal bp flutter unity rn"/><ph props="cpp unreal bp flutter unity"> (Android &amp; iOS)</ph></li>
                        <li><apiname keyref="isCameraExposureSupported" props="android ios cpp unreal bp flutter unity rn"/><ph props="cpp unreal bp flutter unity"> (Android &amp; iOS)</ph></li>
                        <li><codeph><apiname keyref="VideoCanvas"/></codeph> 中增加 <codeph>backgroundColor</codeph> 成员</li>
                        <li><codeph><apiname keyref="CodecCapInfo"/></codeph> 中增加 <codeph>codecLevels</codeph> 成员</li>
                        <li><codeph><apiname keyref="CodecCapLevels"/></codeph></li>
                        <li><codeph><apiname keyref="VIDEO_CODEC_CAPABILITY_LEVEL"/></codeph></li>
                        <li><codeph><apiname keyref="REMOTE_VIDEO_STATE_REASON"/></codeph> 中增加 <codeph><ph keyref="REMOTE_VIDEO_STATE_REASON_CODEC_NOT_SUPPORT"/></codeph> 枚举</li>
                        <li><codeph><apiname keyref="setRouteInCommunication" props="android unity rn flutter unreal bp"/></codeph><ph props="unity rn flutter unreal bp"> (Android)</ph></li>
                        </ul></p>
                    <p><b>修改</b>
                        <ul>
                        <li><apiname/></li>
                        </ul></p>
                    <p><b>废弃</b>
                        <ul>
                        <li><apiname/></li>
                        </ul></p>
                    <p><b>删除</b>
                        <ul>
                        <li><apiname/></li>
                        </ul></p>
                </body>
            </topic>
        </topic>
    </topic>
</topic>
