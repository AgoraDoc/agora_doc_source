<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="api_setoption">
    <title><ph keyref="setOption"/></title>
    <shortdesc id="short"><ph id="shortdesc">设置游戏选项，包括加入/结束游戏，或者在游戏过程中与其他用户互动。</ph></shortdesc>
    <prolog>
        <metadata>
            <keywords>
                <indexterm keyref="setOption"/>
            </keywords>
        </metadata>
    </prolog>
    <refbody>
        <section id="prototype">
            <p outputclass="codeblock">
            <codeblock props="android" outputclass="language-java">public int setOption(int operationId, String optionId, String args);
</codeblock>
            <codeblock props="ios mac" outputclass="language-objectivec">- (AGEErrorCode)setOptionWithOperationId:(NSInteger )operationId optionId:(NSString *)optionId args:(NSString *)args NS_SWIFT_NAME(setOption(operationId:optionId:args:));
</codeblock>
            <codeblock props="cpp" outputclass="language-cpp"/>
            <codeblock props="electron" outputclass="language-typescript"/>
            <codeblock props="unity" outputclass="language-csharp"/>
            <codeblock props="rn" outputclass="language-typescript"/>
            <codeblock props="flutter" outputclass="language-dart"/> </p>
        </section>
        <section id="detailed_desc">
            <p>对于本局游戏进行的操作，包括：加入/准备/结束本局游戏，在游戏中向指定用户发送礼物。成功调用该方法后， SDK 会触发 <xref keyref="onSetOptionResult"/> 回调。</p>
        </section>
        <section id="parameters">
            <title>参数</title>
            <parml>
            <plentry id="operationid">
                <pt>operationId</pt>
                <pd>操作 ID，用于标识某个操作。</pd>
            </plentry>
            <plentry id="optionid">
                <pt>optionId</pt>
                <pd>在该局游戏中进行的具体操作。当设置该参数为不同的 Key 时，代表不同的操作： 
                        <ul>
                        <li><apiname keyref="GAME_STATE"/>：加入/准备/结束 本局游戏。</li>
                        <li><apiname keyref="SEND_GIFT"/>：在游戏中进行送礼物等互动操作。</li>
                        </ul>
                        <p>在不同 Key 类型下的参数取值和描述如下表所示。</p>
                        <table>
                        <tgroup cols="4" align="left">
                            <colspec colname="c1" colnum="1" colwidth="2.22*" align="left"/>
                            <colspec colname="c2" colnum="2" colwidth="1.27*" align="left"/>
                            <colspec colname="c3" colnum="3" colwidth="1*" align="left"/>
                            <colspec colname="c4" colnum="4" colwidth="5.4*" align="left"/>
                            <thead>
                                <row>
                                    <entry>Key 类型</entry>
                                    <entry>参数名</entry>
                                    <entry>类型</entry>
                                    <entry>说明</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry morerows="3"><apiname keyref="GAME_STATE"/></entry>
                                    <entry><parmname>isln</parmname></entry>
                                    <entry>bool</entry>
                                    <entry>用户（玩家或观众）加入/退出游戏。 
                                        <ul>
                                        <li><codeph><ph keyref="true"/></codeph>：加入游戏。</li>
                                        <li><codeph><ph keyref="false"/></codeph>：退出游戏。</li>
                                        </ul></entry>
                                </row>
                                <row>
                                    <entry><parmname>isReady</parmname></entry>
                                    <entry>bool</entry>
                                    <entry>用户准备/取消准备加入或退出游戏。 
                                        <ul>
                                        <li><codeph><ph keyref="true"/></codeph>：准备。</li>
                                        <li><codeph><ph keyref="false"/></codeph>：取消准备。</li>
                                        </ul></entry>
                                </row>
                                <row>
                                    <entry><parmname>isPlaying</parmname></entry>
                                    <entry>bool</entry>
                                    <entry>取值为 <codeph><ph keyref="true"/></codeph>，表示开始本局游戏。仅房主可设置。</entry>
                                </row>
                                <row>
                                    <entry><parmname>Null</parmname></entry>
                                    <entry>-</entry>
                                    <entry>结束游戏。仅房主可设置。</entry>
                                </row>
                                <row>
                                    <entry morerows="2"><apiname keyref="SEND_GIFT"/></entry>
                                    <entry><parmname>to</parmname></entry>
                                    <entry>string</entry>
                                    <entry>指定接收礼物的主播 ID。</entry>
                                </row>
                                <row>
                                    <entry><parmname>giftCost</parmname></entry>
                                    <entry>number</entry>
                                    <entry>加入房间后 <parmname>gift_info</parmname> 返回的 key，详见 <xref keyref="onMessage"/>。</entry>
                                </row>
                                <row>
                                    <entry><parmname>count</parmname></entry>
                                    <entry>number</entry>
                                    <entry>触发数量，代表单次送礼物的个数。</entry>
                                </row>
                            </tbody>
                        </tgroup>
                        </table>
                        <note>
                        <ul>
                            <li>当用户加入游戏时，参数调用流程为：<parmname>isln</parmname>=<codeph><ph keyref="true"/></codeph> > <parmname>isReady</parmname>=<codeph><ph keyref="true"/></codeph>  > <parmname>isPlaying</parmname>=<codeph><ph keyref="true"/></codeph>。</li>
                            <li>当用户离开游戏时，参数调用流程为：<parmname>isReady</parmname>=<codeph><ph keyref="false"/></codeph> > <parmname>isln</parmname>=<codeph><ph keyref="false"/></codeph>。</li>
                        </ul>
                        </note></pd>
            </plentry>
            <plentry id="args">
                <pt>args</pt>
                <pd>json 字符串格式。</pd>
            </plentry>
            </parml> </section>
        <section id="return_values">
            <title>返回值</title>
            <ul>
            <li>0: 方法调用成功。</li>
            <li>&lt; 0: 方法调用失败。</li>
            </ul> </section>
    </refbody>
</reference>
