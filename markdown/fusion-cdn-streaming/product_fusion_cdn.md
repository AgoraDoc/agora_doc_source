Agora 融合 CDN 直播是声网基于自身在网络传输、质量调度、SDK 领域多年的技术积累以及实时质量数据分析能力，与国内外多家优秀供应商完成深度对接，为开发者提供的一个基于用户访问质量数据实时调度的标准协议 CDN 直播服务。融合 CDN 直播服务与 Agora 提供的媒体服务进行了深度协同，为端到端的用户体验负责，旨在提供一个整体播放体验最佳的 CDN 直播方案，可用于社交直播、电商直播、体育直播、教育直播等场景。

![fusion cdn architecture](https://web-cdn.agora.io/docs-files/1631513995914)

## 功能列表

### 多种收流方式

- 标准协议：支持通过 RTMP、RTMPS、QUIC、SRT 等协议推流到声网服务器，同时支持通过 RTMP、HTTP-FLV、HTTP-HLS 协议进行回源收流。
- 声网协议：支持通过声网的 RTC SDK 或者 OBS 插件使用声网私有协议推流，享受高稳定性的推流服务。

### 直播流分发

支持 RTMP、RTMPS、HTTP-FLV、HTTP-HLS 等多种分发协议，同时支持 HTTP、SRT、QUIC 等分发传输协议。

### 直播流处理

- 转码：支持按照开发者自定义的模板或者预设的模板转码，支持声网低码高清转码及纯音频转码。
- 截图：支持对推流内容进行自定义规则的截图，支持封面截图。
- 审核：支持对推流内容进行实时审核。
- 水印：支持对推流内容设置水印。

### 直播录制

支持对推流内容进行自定义规则的录制，支持 HLS、MP4、FLV 等多种录制格式。

### 直播安全

- 支持对推拉流地址自定义 token 鉴权。
- 支持设置 IP 黑白名单。
- 支持 referer 封禁。

### 线路调度

- Agora 融合 CDN 根据声网所有 SDK 汇总的网络和线路访问数据进行实时切换，实时调度策略通过接口或者 DNS 方式对外提供服务。
- 支持开发者使用声网调度接口实时获取策略并自行封装上层逻辑。

### 质量透明

支持在 Agora 水晶球查看直播的完整端到端质量数据。

## 产品优势

### 实时调度

- Agora 依托于大量的 SDK 实时质量数据以及对实时处理极致的追求，使实时按照质量调度变为可能，为开发者提供最优覆盖的 CDN 服务。
- Agora 依托于自身 RTC 领域对网络的深度理解和长期对于调度切换算法的精益求精，形成了一套故障发现-节点快切换-节点慢恢复-节点评分一体化的调度体系。
- 提供公共通用的调度接口，开发者可以直接对接调度，为自己的服务提升稳定性。

### 全球覆盖

- Agora 对全球几十家 CDN 服务商进行质量筛选，选择了一批优质的合作伙伴，确保在任何地方任何运营商都有多个服务提供商随时可用。
- Agora 通过对自身的媒体服务升级，向合作伙伴提供标准对接接口，对合作伙伴屏蔽了转封装、转码、媒体处理等细节，为开发者提供统一的配置和媒体流格式。
- Agora 依托自研的 SD-RTN™，当直播中的主播和观众出现跨区的时候，数据流将在声网媒体服务之间自动跨区加速，保证了媒体流在跨区跨国时的质量。

### 终端自适应切换

- 为开发者提供多种智能切换的策略，开发者可以根据用户的网络状况进行多传输协议、多码率、多服务节点的自适应切换。
- 针对 FLV 和 HLS 协议进行深度优化，极大提升开发者使用体验：
  - 针对 FLV 支持跨码率跨节点平滑无缝切换。
  - 针对 HLS 支持流内自动切换。

### 质量透明

- 终端用户客户端侧的所有质量数据都会在水晶球呈现，开发者既可以查看全局状态，又可以精确到具体某一次的推流或者播放调查用户问题。
- 直播流在声网服务端侧的数据同时也会在水晶球实时呈现，清晰体现每一条直播流在服务与服务之间流转的质量和状况。

### 丰富的 API 接口

- 支持开发者调用 RESTful API 在服务端设置所有功能，覆盖从开通到各类配置变更。
- 支持开发者通过回调获取推流、转码、录制、截图等服务的通知消息。

### 全场景覆盖

Agora 提供包含实时音视频、推流、播放等功能为一体的 SDK，且支持自由裁剪。开发者可以在一个 SDK 内完成实时音视频、CDN 直播等各种场景的切换和搭建。

## 协议支持

Agora 融合 CDN 直播支持的协议见下表。

| 协议           | 推流/回源拉流 | 播放 |
| :------------- | :------------ | :--- |
| RTMP           | ✔             | ✔    |
| RTMPS          | ✔             | ✔    |
| HTTP-FLV       | ✔             | ✔    |
| HTTP-HLS       | ✔             | ✔    |
| HTTPS-FLV      | ✔             | ✔    |
| HTTPS-FLV      | ✔             | ✔    |
| RTMP over QUIC | ✔             | ✔    |
| HTTP over QUIC | ✔             | ✔    |
| RTMP over SRT  | ✔             | ✔    |
| 声网私有协议   | ✔             | ✔    |