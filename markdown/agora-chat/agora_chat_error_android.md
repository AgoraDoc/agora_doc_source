本文主要介绍在调用 Agora Chat API 过程中，SDK 返回的错误码和错误信息。

你可以根据如下错误码及错误信息了解出错的可能原因，并采取响应措施。对于未给出解决方法的错误码，Agora 推荐你[提交工单](https://agora-ticket.agora.io/)，我们的技术服务会根据你在实际场景中遇到的问题进行排查。

Agora Chat SDK 在运行过程中，可能通过如下方式返回错误码和错误信息：

- 调用方法失败时的返回值。
- 通过 `onError` 回调报告错误码。

| 错误码 | 错误信息                         | 描述                             | 可能的原因                                                   |
| :----- | :------------------------------- | :------------------------------- | :----------------------------------------------------------- |
| `0`    | `EM_NO_ERROR`                    | 操作成功                         | 无                                                           |
| `1`    | `GENERAL_ERROR`                  | 一般性错误（没有明确归类的错误） | SDK 尚未正确初始化，或请求服务器时未识别出具体原因的错误。你可以尝试重新初始化 SDK。 |
| `2`    | `NETWORK_ERROR`                  | 网络错误                         | 网络连接中断导致 SDK 与服务器的连接断开。                    |
| `4`    | `EXCEED_SERVICE_LIMIT`           | 超过服务限制                     | 超过即时通讯服务的数量限制，例如：注册用户总数或用户好友人数等超过套餐包限制。 |
| `100`  | `INVALID_APP_KEY`                | 无效的 App Key                   | App Key 不正确，请更换有效的 App Key 并重新登录。如何获取 App Key 详见[获取即时通讯项目信息](./enable_agora_chat?platform=Android#获取即时通讯项目信息)。 |
| `101`  | `INVALID_USER_NAME`              | 无效的用户名                     | 用户名为空或参数格式不正确，请更换有效的用户名并重新登录。 |
| `102`  | `INVALID_PASSWORD`               | 错误的密码                       | 登录时提供的密码为空或不正确，请更换正确的密码并重新登录。   |
| `104`  | `INVALID_TOKEN`                  | 错误的 Token                     | 登录时提供的 Token 为空或不正确，请更换正确的 Token 并重新登录。 |
| `200`  | `USER_ALREADY_LOGIN`             | 用户已登录                       | 该用户名已登录，请勿重复登录。                               |
| `201`  | `USER_NOT_LOGIN`                 | 用户未登录                       | 调用方法时用户尚未登录。请检查方法的调用逻辑。               |
| `202`  | `USER_AUTHENTICATION_FAILED`     | 用户鉴权失败                     | 鉴权失败，请检查 Token 是否过期。                            |
| `203`  | `USER_ALREADY_EXIST`             | 用户已存在                       | 用户名已注册，请勿重复注册。                                 |
| `204`  | `USER_NOT_FOUND`                 | 用户不存在                       | 调用方法时该用户尚未注册，请先注册再进行其他操作。           |
| `205`  | `USER_ILLEGAL_ARGUMENT`          | 用户参数不正确                   | 调用方法时设置了无效的参数。例如指定的用户名中含有非法字符。请重新设置参数。 |
| `206`  | `USER_LOGIN_ANOTHER_DEVICE`      | 用户在其他设备登录               | 如果用户未开启多设备登录，当在其他设备登录时，会被强制从当前登录的设备下线，且收到该错误码。 |
| `207`  | `USER_REMOVED`                   | 用户已经被注销                   | 已登录的用户被服务端删除。                                   |
| `208`  | `USER_REG_FAILED`                | 用户注册失败                     | 调用服务端注册用户方法时，传入参数为空或不合法，请确认后重新调用方法。详见[注册用户 RESTful API](./agora_chat_restful_reg?platform=RESTful#注册单个用户)。 |
| `209`  | `PUSH_UPDATECONFIGS_FAILED`      | 更新推送配置错误                 | 用户更新推送配置信息错误，如更新推送显示昵称、更新免打扰模式等。请重新调用方法。 |
| `210`  | `USER_PERMISSION_DENIED`         | 用户无权限                       | 用户没有操作权限。请检查是用户是否被封禁，如被封禁需要解禁并重新登录。 |
| `213`  | `USER_BIND_ANOTHER_DEVICE`       | 用户已经在另外设备登录           | 如果用户设置了设备登录优先级（如先登录的设备优先级高），当已登录的用户登录其他设备时，则登录失败，且收到该错误码。 |
| `214`  | `USER_LOGIN_TOO_MANY_DEVICES`    | 用户登录设备数超过限制           | 用户登录新设备时，同一用户登录设备数量已达到最大值 4。如对登录设备数量有更高需求，请联系 Agora 技术支持。 |
| `215`  | `USER_MUTED`                     | 用户被禁言                       | 群组或聊天室中被禁言的用户发送消息。                         |
| `216`  | `USER_KICKED_BY_CHANGE_PASSWORD` | 用户密码更新导致用户登出         | 已登录的用户修改密码导致被强制登出。请使用新密码重新登录。   |
| `217`  | `USER_KICKED_BY_OTHER_DEVICE`    | 用户登出其他设备                 | 开启多设备登录后，用户在当前设备上通过调用 API 或管理后台从指定的其他设备登出。 |
| `300`  | `SERVER_NOT_REACHABLE`           | 请求服务失败                     | 网络原因导致 SDK 与即时通讯系统断开连接，建议稍后再次尝试。  |
| `301`  | `SERVER_TIMEOUT`                 | 请求服务超时                     | 有些方法调用需要 SDK 返回结果，如果 SDK 处理事件过长，即超过 30 秒没有返回，则返回该错误码。 |
| `302`  | `SERVER_BUSY`                    | 服务器忙碌                       | 当前服务器忙碌，建议稍后再次尝试。                           |
| `303`  | `SERVER_UNKNOWN_ERROR`           | 请求服务的通用错误码             | 当请求服务未成功时的通用错误，该错误发生情况较多，需要根据日志进一步排查。 |
| `304`  | `SERVER_GET_DNSLIST_FAILED`      | 获取服务器配置信息错误           | SDK 获取当前应用的服务器配置时失败。请重新调用方法。         |
| `305`  | `SERVER_SERVICE_RESTRICTED`      | 当前 app 被禁用                  | 在被禁用的 App 下调用方法。                                  |
| `400`  | `FILE_NOT_FOUND`                 | 文件未找到                       | 用户获取不到日志文件，或下载附件时获取不到文件。             |
| `401`  | `FILE_INVALID`                   | 文件无效                         | 上传消息附件或群组文件时的文件无效。                         |
| `402`  | `FILE_UPLOAD_FAILED`             | 上传文件失败                     | 上传消息附件或群组文件失败。请尝试重新上传。                 |
| `403`  | `FILE_DOWNLOAD_FAILED`           | 下载文件失败                     | 下载消息附件或群组文件失败。请尝试重新下载。                 |
| `404`  | `FILE_DELETE_FAILED`             | 删除文件失败                     | 获取日志文件时，SDK 会删除旧日志文件，如果删除失败，则返回该错误码。 |
| `405`  | `FILE_TOO_LARGE`                 | 文件太大                         | 上传消息附件或群组文件时，文件大小超过限制。请确认文件大小并重新上传。 |
| `500`  | `MESSAGE_INVALID`                | 消息异常                         | 待发送的消息内容、消息 ID 为空，或消息发送方的用户名与当前登录的用户名不同。请排查后重新发送消息。 |
| `502`  | `MESSAGE_SEND_TRAFFIC_LIMIT`     | 消息限流                         | 发送消息频率过高或消息体积过大，建议降低发送频率或消息体积。详见[即时通讯限制条件](./agora_chat_limitation?platform=Android)。 |
| `504`  | `MESSAGE_RECALL_TIME_LIMIT`      | 消息撤回超时                     | 尝试撤回消息时超过撤回允许时间。                             |
| `505`  | `SERVICE_NOT_ENABLED`            | 服务未开启                       | 尝试使用未开通的功能。                                       |
| `506`  | `MESSAGE_EXPIRED`                | 消息已过期                       | 发送群组回执时超过时间限制 (默认 3 天) 。                    |
| `507`  | `MESSAGE_ILLEGAL_WHITELIST`      | 用户未在白名单中                 | 当群组聊天室开启全员禁言，未在禁言白名单中的用户发送消息。   |
| `508`  | `MESSAGE_EXTERNAL_LOGIC_BLOCKED` | 消息执行发送前回调导致被拦截     | 发送的消息被用户定义的发送前回调规则拦截，请确认发送前回调规则。 |
| `600`  | `GROUP_INVALID_ID`               | 群组 ID 异常                     | 调用群组相关方法，提供的群组 ID 为空。                       |
| `601`  | `GROUP_ALREADY_JOINED`           | 已在该群组中                     | 已在群组中的用户尝试加入该群组。                             |
| `602`  | `GROUP_NOT_JOINED`               | 未加入该群组                     | 尝试在未加入的群组中发送消息，或进行其他群组操作。           |
| `603`  | `GROUP_PERMISSION_DENIED`        | 无权限的群组操作                 | 用户没有群组操作的权限，例如群组成员不能设置群组管理员。请确认权限是否为管理员。 |
| `604`  | `GROUP_MEMBERS_FULL`             | 群组已满                         | 群组人数已经达到上限。                                       |
| `605`  | `GROUP_NOT_EXIST`                | 群组不存在                       | 尝试对不存在的群组进行操作。                                 |
| `700`  | `CHATROOM_INVALID_ID`            | 聊天室 ID 异常                   | 调用聊天室相关方法时提供的聊天室 ID 为空。                   |
| `701`  | `CHATROOM_ALREADY_JOINED`        | 已在该聊天室中                   | 已在聊天室中的用户尝试加入该聊天室。                         |
| `702`  | `CHATROOM_NOT_JOINED`            | 未加入该聊天室                   | 尝试在未加入的聊天室中发送消息，或进行聊天室操作。           |
| `703`  | `CHATROOM_PERMISSION_DENIED`     | 无权限的聊天室操作               | 用户没有聊天室操作权限，例如聊天室成员不能设置聊天室管理员。请确认权限是否为管理员。 |
| `704`  | `CHATROOM_MEMBERS_FULL`          | 聊天室已满                       | 聊天室人数已经达到上限。                                     |
| `705`  | `CHATROOM_NOT_EXIST`             | 聊天室不存在                     | 尝试对不存在的聊天室进行操作。                               |
| `900`  | `PUSH_NOT_SUPPORT`               | 第三方推送不支持                 | 用户配置的第三方推送在当前设备上不支持。请确认当前设备是否支持该第三方推送类型。 |
| `901`  | `PUSH_BIND_FAILED`               | 绑定第三方推送密钥失败           | 消息推送过程中，上传第三方推送密钥到 Agora 即时通讯服务器失败。请重新调用方法。 |
| `902`  | `PUSH_UNBIND_FAILED`             | 解绑第三方推送密钥失败           | 用户登出时解绑第三方推送密钥失败。请重新调用方法。           |