本文介绍 Agora 即时通讯消息功能概览。
消息（Message）为即时通讯应用中，消息发送方发送给消息接收方的内容。包括如下消息类型：

| <span style="white-space:nowrap;"> 类型  &emsp;&emsp;&emsp;&emsp;&emsp;</span>            | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| 文本消息       | 文本消息的内容是文本，可以包含超链接、emoji 表情符号等。表情消息是基于文本消息实现的。 文本消息大小限制为 5 KB。 |
| 图片消息       | 图片消息是附件消息，需要先将图片上传至消息服务器。接收方收到图片时，会自动下载图片缩略图。 图片消息大小限制为 10 MB。 |
| 语音消息       | 语音消息是附件消息，需要先将语音上传至消息服务器。接收方收到语音时，会自动下载语音。 语音消息大小限制为 10 MB。 |
| 视频消息       | 视频消息是附件消息，需要先将视频上传至消息服务器。接收方收到视频时，会自动下载视频缩略图，点击下载视频消息。 视频消息大小限制为 10 MB。 |
| 文件消息       | 文件消息是附件消息，需要先将文件上传至消息服务器。接收方收到文件时，会自动下载文件。 文件消息大小限制为 10 MB。 |
| 位置消息       | 位置消息需要第三方的地图服务提供经纬度信息。接收方接收到位置消息，通过经纬度信息可以在第三方的地图服务中显示位置。 |
| 透传消息       | 透传消息可以理解为一条指令，通过发送这条指令给对方，告诉对方要做的 action，对方收到消息后系统可以自定义处理。透传消息不会在 UI 上展示。 消息大小显示为 5 KB。 透传消息的使用场景：头像、昵称的更新、状态同步等。 透传消息不会存入本地数据库。 |
| 消息自定义扩展 | 当基础的消息类型不满足需求时，可以使用消息自定义扩展增强基础消息类型。 使用扩展后，消息大小不能超过原类型消息的大小。 消息自定义扩展的使用场景：消息中需要携带被回复的消息内容、图文消息等。 |
| 自定义消息     | 开发者自定义的消息类型。自定义消息支持设置类型名称，开发者可以添加多种自定义消息。 自定义消息大小限制为 5 KB。 自定义消息的使用场景：红包消息、模板消息等。 |

会话（Conversation）为即时通讯应用中，至少 2 个用户组成的聊天场景，包括如下会话类型：
 - 单聊：2 个用户建立的会话，双方可以在会话中收发消息。
 - 群聊：会话由群成员发送的消息组成。
 - 聊天室：会话是由聊天室成员发送的消息组成。


## 功能列表

### 管理本地历史消息

Agora Chat SDK 将发送和接收到的消息存储在本地数据库中，支持以会话为单位管理消息。

| 功能                         | 描述                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| 获取本地所有会话             | 获取本地所有的会话，消息本地存储有已读未读状态，会话中包含会话的未读消息数。 |
| 从数据库中读取指定会话的消息 | 从本地数据库中获取指定会话的消息，进入会话时，获取会话内容。 |
| 获取指定会话的未读消息数量   | 从本地数据库中获取指定会话的未读消息数，用以显示指定会话未读消息数。 |
| 获取所有会话的未读消息数量   | 从本地数据库中获取所有会话的未读消息数，用以显示整个应用的未读消息数。 |
| 未读消息数清零               | 查看未读消息后，未读消息数清零。可以清零指定的会话和所有会话。 |
| 删除会话及聊天记录           | 删除本地会话，会话里的聊天记录是否删除是可选项。             |
| 根据关键字搜索会话消息       | 根据关键字对会话里的消息内容进行搜索。                       |
| 导入消息到数据库             | 当需要将外部的消息导入到本地数据库时，可以使用该功能。需要构造消息对象。 |
| 插入消息                     | 模拟收到某些消息通知，可以构造一条消息并写入会话。           |

### 获取服务器端历史消息

Agora Chat SDK 将历史消息存储在消息服务器中，支持以会话为单位获取历史消息。 历史消息存储时间与套餐版本相关，详见[套餐包详情](./agora_chat_plan?platform=Web#消息相关)。

| 功能                       | 描述                                 |
| -------------------------- | ------------------------------------ |
| 从服务器获取会话           | 可以从服务端获取会话。               |
| 分页获取指定会话的历史消息 | 可以从服务端分页获取会话的历史消息。 |

### 实现消息的已读回执和送达回执

支持消息投递成功后返回送达回执，以及消息接收方查看消息后返回已读回执。

| 功能             | 描述                                   |
| ---------------- | -------------------------------------- |
| 消息送达回执     | 消息下发成功后，会返回消息送达回执。   |
| 消息已读回执     | 接收方查看消息后，会返回消息已读回执。 |
| 单个消息已读回执 | 提供单聊消息已读回执能力。             |
| 群组消息已读回执 | 提供群组消息已读回执能力。             |