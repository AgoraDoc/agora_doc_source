# 聊天室概述

聊天室是支持多人加入的类似 Twitch 的组织。聊天室中的成员没有固定关系，用户离线后，超过 5 分钟会自动退出聊天室。聊天室成员在离线后，不会收到推送消息。聊天室可以应用于直播、消息广播等。

## 聊天室角色和权限

聊天室具有以下角色和权限：

- 聊天室成员：可以发送和接收聊天室消息的普通成员。
- 聊天室管理员：由聊天室所有者指定。除了发送和接收聊天室消息外，他们还拥有一部分管理权限。每个聊天室最多可以添加 99 位管理员。
- 聊天室所有者：聊天室的创建者。聊天室所有者拥有最高权限，包括指定聊天室管理员、解散聊天室、修改聊天室属性、管理其他聊天室成员。

## 群组和聊天室的区别

群组和聊天室都支持多个用户之间的即时通讯。主要区别在于成员之间是否有稳定的关系。群组成员往往停留时间较长，而聊天室成员自由加入和离开。

下表显示了群组和聊天室之间的功能比较：

| 功能         | 群组                                                         | 聊天室                                                       |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 使用场景     | 类似于 Signal，Skype 里的群聊，所有加入的用户拥有固定的关系。  | 类似 Twitch 的直播间，成员间没已有固定关系，离开即退出。     |
| 创建方式 | 所有 app 用户都可以创建群组。   | 仅 [超级管理员](https://docs.agora.io/agora_chat_restful_chatroom_superadmin?platform=RESTful#adding-a-chat-room-super-admin) 有权限创建聊天室。  |
| 类型 | 四种群组类型支持不同使用场景。 | 仅有一种类型，所有用户可以自由加入退出。      |
| 最大成员数   | 成员数支持取决于所选择的版本，最高版本支持 8,000 人。        | 成员数支持取决于所选择的版本，最高版本支持 10,000 人。如需提升该上限，请联系商务。 |
| 离线推送消息 | 离线时，会收到推送消息。             | 离线时，不会收到推送消息；成员离线超过 5 分钟会自动退出聊天室。          |
| 离线消息存储 | 支持离线消息存储，每个会话存储 200 条消息。<br/>用户上线时，会收到离线消息。 | 不支持离线消息存储。如果需要用户新加入聊天室时服务器推送最近的历史消息，可以联系商务开通聊天室历史消息推送，每个会话默认支持 10 条消息，最多可调整至 200 条。 |
| 消息可靠性   | 群组中发送的所有消息，用户都会收到。        | 当消息量大时，聊天室中超过阈值的消息会被丢弃。消息开始丢弃的阈值为每秒 100 条消息，可以根据需求进行调整。 |

## 聊天室功能

即时通讯（环信）SDK 支持创建和管理聊天室、管理聊天室成员、修改聊天室属性。

可以使用聊天室 API 实现以下功能：

### 创建聊天室

只有[超级管理员](https://docs.agora.io/agora_chat_restful_chatroom_superadmin?platform=RESTful#adding-a-chat-room-super-admin) 可以创建聊天室，创建聊天室的用户成为聊天室所有者。支持的聊天室成员的最大数量根据你购买的套餐而有所不同。详见 [聊天室限制](https://docs.agora.io/en/agora-chat/agora_chat_chatroom_overview?platform=Android#limitations)。

### 加入和离开聊天室

所有聊天用户都可以自由加入和离开聊天室。

### 解散聊天室

只有聊天室所有者才能解散聊天室。

### 从服务器获取聊天室列表

所有聊天用户都可以通过分页从服务器获取聊天室列表。

### 获取聊天室属性

所有聊天室成员都可以获取聊天室属性，包括聊天室名称和描述。

### 修改聊天室名称

只有聊天室所有者有权修改聊天室名称。

### 修改聊天室公告

只有聊天室所有者有权编辑和删除聊天室公告。公告更新后，所有聊天室成员都会通过回调事件收到此更新。

### 转让聊天室所有权

聊天室所有者可以将所有权转让给指定的聊天室成员。

### 添加和删除聊天室管理员

聊天室所有者可以添加和删除聊天室管理员。

### 将指定的聊天室成员禁言

聊天室所有者或管理员可以将指定的聊天室成员禁言。

### 将所有聊天室成员禁言

聊天室所有者或管理员可以将所有聊天室成员禁言。默认情况下，聊天室所有者和管理员以及白名单成员发消息不受影响。

### 管理聊天室白名单列表

聊天室所有者或管理员可以将指定成员添加到聊天室白名单列表，或将其从列表中删除。一旦添加到聊天室白名单列表，即使聊天室所有者或管理员已将所有聊天室成员禁言，该成员也可以向聊天室发送消息。

### 管理聊天室黑名单列表

聊天室所有者或管理员可以将指定的成员添加到聊天室黑名单列表中，或将其从列表中删除。加入聊天室黑名单列表后，成员将无法发送或接收聊天室消息，也无法再次加入聊天室。

## 聊天室的限制

聊天室成员的最大数量、可以创建的聊天室总数以及用户可以加入的聊天室的最大数量根据不同套餐而异。

| 套餐   | 聊天室成员数  | 可以创建的聊天室数量 | 单个用户可以加入的聊天室数量 |
| :--------- | :------------ | :--------------------- | :----------------------- |
| **免费版** | 100           | 100                    | 100                      |
| **基础版** | 2,000         | 10,000                 | 1,000                    |
| **进阶版**     | 10,000        | 50,000                 | 2,000                    |
| **企业版**   | 20,000 及更多 | 100,000                | 10,000                   |