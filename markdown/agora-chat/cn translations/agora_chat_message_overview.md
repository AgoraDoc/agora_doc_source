消息为即时通讯应用中，消息发送方发送给消息接收方的内容。 本文概述 Agora Chat SDK 支持的消息类型和功能。

## 消息类型

Agora Chat SDK 支持以下消息类型。

### 文本消息

文本消息的内容是文本，可以包含超链接和表情符号等。 文本消息大小限制为 5 KB。

### 图片消息

图像消息是附件消息。 要发送图片消息，需要先将图片上传至消息服务器。 接收方收到图片时，会自动下载图片缩略图。 用户需要点击缩略图才能下载图片文件。 图片消息大小限制为 10 MB。

### 语音消息

语音消息是附件消息。 要发送语音消息，需要先将语音上传至消息服务器。 接收方收到语音时，会自动下载语音。  语音消息大小限制为 10 MB。

### 视频消息

视频消息是附件消息。 要发送视频消息，需要先将视频上传至消息服务器。 接收方收到视频时，会自动下载视频缩略图。 用户需要点击缩略图才能下载视频文件。 视频消息大小限制为 10 MB。

### 文件消息

文件消息是附件消息。 要发送文件消息，需要先将文件上传至消息服务器。 接收方收到文件时，会自动下载文件。  文件消息大小限制为 10 MB。

### 位置消息

位置消息需要第三方地图服务提供经纬度信息。 接收方接收到位置消息，通过经纬度信息可以在第三方地图服务中显示位置。

### 透传消息

透传消息告诉接收方需要做出的特定操作。 接收方收到命令消息后，自行处理指令。 透传消息不会在用户界面上呈现。 你可以使用透传消息来更新用户的头像和昵称，然后同步更新。 透传消息不会存入本地数据库。 透传消息大小限制为 5 KB。

### 扩展消息

当文本、附件、位置等消息类型无法满足业务需求时，可以使用扩展消息。 一个典型的使用场景是引用之前文本或图片消息的扩展消息。 使用扩展后，消息大小不能超过原类型消息的大小。

### 自定义消息

开发者自定义的消息类型。 你可以自定义多种消息类型并设置类型名称。  典型的使用场景包括红包消息和模板消息等。 自定义消息大小限制为 5 KB。

## 消息功能

Agora Chat SDK 支持收发消息、管理历史消息、管理消息已读回执等。

你可以使用 API 实现以下功能。

### 发送和接收消息

所有即时通讯用户都可以发送和接收消息。
- 在一对一单聊中，两个用户互相发送消息。
- 在多人群聊中，成员在群组中发送和接收消息。
- 在聊天室中，成员在聊天室发送和接收消息。

在各个场景下，即时通讯用户之间交换的消息统称为会话。

### 获取本地所有对话

Agora Chat SDK 将发送和接收到的消息存储在本地数据库中 您可以通过获取本地设备上的所有会话来管理消息。

### 获取指定会话

你可以获取指定会话的消息。 用户进入会话时，读取该会话中的所有消息。

### 获取未读消息数量

消息与已读未读状态一起存储，你可以使用已读未读状态获取每个会话的未读消息数。

### 未读消息数清零

查看未读消息后，未读消息数清零。 可以清零指定的会话和所有会话。

### 删除会话和历史消息

删除本地会话，会话里的聊天记录是否删除是可选项。

### 根据关键字搜索消息

根据关键字对会话里的消息内容进行搜索。

### 导入消息到数据库

你可以将消息从第三方 app 导入本地数据库。

### 插入消息

你可以在会话中插入消息。 使用场景包括接收消息通知等。

### 从服务器获取会话

除本地设备之外，你也可以从服务器获取会话。

### 获取指定会话的历史消息

Agora Chat SDK 将历史消息存储在消息服务器中，支持从服务器中分页获取会话的历史消息。 历史消息存储时长与套餐包版本有关。 详见[消息存储时长限制](#limitations)。

### 消息送达回执

支持消息投递成功后返回送达回执。

### 消息已读回执

在一对一单聊和多人群聊中，支持在消息接收方查看消息后返回消息已读回执。

<a name="limitations"></a>

## 消息存储时长限制

历史消息存储时长与套餐包版本有关：

| 即时通讯套餐包 | 消息存储时长（天） |
|--- | --- |
| **免费版** | 3 |
| **基础版** | 7 |
| **进阶版** | 90 |
| **企业版** | 180 |